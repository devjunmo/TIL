# 로그인 방식 (세션방식, JWT방식)

## HTTP의 stateless와 stateful
- stateless: HTTP는 요청/응답 후 연결을 끊는다(즉, 방금 통신한 상대의 상태를 저장하지 않는다)
- stateful: 로그인같이 클라이언트 정보를 저장해야 할때 stateful하게 개발하며, 세션방식, 토큰방식 두가지가 있다

## 세션방식
- 세션: 클라이언트가 웹 서버에 접속해있는 상태를 말함
- 세션ID: 서버 메모리에 저장되는 클라이언트 연결 별 유니크한 ID
- 로그인 원리: 클라이언트 로그인시 세션 ID를 생성하고 그것을 쿠키를 통해 클라이언트와 공유. 이후 다시 요청이 왔을 때 세션 ID를 비교하는 식으로 인증
- 단점: 유저 수가 많아질 떄 서버 메모리가 터질 수 있는점

## 토큰 방식
- stateless 하기 때문에 서버 메모리 과부화 문제가 해소된다
- 주로 JWT 토큰이 사용된다, JWT토큰은 헤더, 페이로드, 시그니처로 구성되어 있음
  - header:  JWT인 토큰 유형과 HMAC SHA256또는 RSA와 같은 사용 중인 서명 알고리즘 두 부분으로 구성됨
  - payload: 데이터, 토큰발급자, 유효기간과 같은 인증에 필요한 최소한의 정보로 구성
  - signature: Header에 지정된 알고리즘을 통해 인코딩된 Header, 인코딩된 Payload 조합한 값을 private key로 해싱하여 생성된 서명값
- 장점: 서버 메모리 과부하 문제가 없다, 스케일 아웃에서 세션 동기화 작업이 필요 없다
- 단점: stateless 하기 때문에 token값만을 가지고 기존에 로그인이 되어있는지에 대해서는 알수없음(토큰 유출시 보안에 매우 취약)