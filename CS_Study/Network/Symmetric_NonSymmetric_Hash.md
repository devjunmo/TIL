# 대칭키, 비대칭키, 해쉬

## ✒︎ 암복호화에 대한 큰그림 
- End point간 통신내용이 평문으로 public 네트워크에 노출되면 통신사고다. 따라서 데이터를 암호화하자. 
- 암호는 end point간 동일한 key를 바탕으로 암복호화 하는 대칭키 방식과, 서로 다른쌍의 키(public key, private key)를 바탕으로 하는 비대칭키 방식이 있다. 


## ✒︎ 대칭키(Symmetric key)
- 대칭키를 사용하여 데이터를 암호화 한 후 주고 받는것은 빠르다는 장점이 있으나, 문제는 대칭키를 주고 받을 때 대칭키가 해킹될 수 있다는 문제가 있다. 때문에 대칭키를 어떻게 주고 받을것인가에 대한 고민이 필요하다.


## ✒︎ 비대칭키(Asymmetric key = Public key)
![publickey](/img/security/비대칭키그림.png)
- 대칭키의 문제를 극복하기 위해 비대칭키 방식을 사용한다. 기본적으로 비대칭키 방식은 end point 각각에서 외부에 공개 할 public key와 private key 한쌍을 생성한다 (즉, 총 두쌍의 키가 생김). 그리고 나서 서로에게 서로의 public key를 public network를 통해 전달한다. 네트워크 망을 거친 public key는 데이터를 암호화 하는데 사용하고, public에 매칭되는 private key는 들어온 데이터를 복호화 하는데 사용한다. 
- CA(Certificate Authority)라고 하는 공개키를 인증해 주는 기관들에 의해 전달 받은 공개키가 올바른 공개키임을 확인 받을 수 있다. 메이저 브라우저에는 CA의 공개키 목록들이 저장되어 있다. 
- 비대칭키는 해커가 네트워크 상에서 public key를 탈취 했다고 해도 private key를 모르면 데이터를 복호화 할 수 없기 때문에 대칭키의 key 전달 문제가 해결된다는 장점이 있지만 속도가 느리다는 단점이 존재한다.

## ✒︎ 대칭키방식과 비대칭키 방식을 함께 사용하여 데이터를 암호화 하는 과정
비대칭키 방식은 대칭키 방식보다 컴퓨터에 훨씬 큰 무리를 준다. 때문에  데이터는 대칭키로 암호화 한다. 대칭키는 탈취되면 끝이라 위험함. 때문에 대칭키를 주고받을때 비대칭키방식을 사용한다. 하지만 대칭키는 탈취되면 끝이라 위험하다. 때문에 대칭키를 주고받을때 비대칭키방식을 사용한다.  
handshake 과정에서 생성된 두 무작위 데이터를 혼합해서 클라이언트는 어떤 임시키를 만든다. 클라이언트에서 만들어진 이 임시 키는 서버의 공개키로 암호화 되어 (인증서에서 넘어온 공개키가 내 손에 있음!) 서버로 보내진다. 그 후 양쪽에서 일련의 과정을 거쳐서  동일한 대칭키가 만들어진다. 이렇게 하면 대칭키가 public 네트워크망을 거치지 않아도 된다는 장점이 있다.


## ✒︎ Hash
해시(hash)란 단방향 암호화 기법으로 해시함수(해시 알고리즘)를 이용하여 고정된 길이의 암호화된 문자열로 바꿔버리는 것을 의미.  
해시함수(hash function)는 임의의 길이의 데이터를 고정된 길이의 데이터로 매핑하는 함수. 매핑 전 원래 데이터의 값을 키(key), 매핑 후 데이터의 값을 해시값(hash value), 매핑하는 과정을 해싱(hashing)이라고 한다.
  - 암호화만 가능하기 때문에 단방향 암호화(One-Way Encryption)라고 한다. 
  - 주로 암호화 해시 함수를 이용한 Hash 암호화 방식을 사용한다.
  - Rainbow table 공격을 완화시켜주는 salt 기법이 있다.
  - 대표적으로 SHA-256 알고리즘이 있다.

## 참고자료
https://www.youtube.com/watch?v=H6lpFRpyl14
https://www.youtube.com/watch?v=jyZ7TQaFy_o
https://liveyourit.tistory.com/183
https://medium.com/@su_bak/crypto-%ED%95%B4%EC%8B%9C-hash-%EB%9E%80-6962be197523